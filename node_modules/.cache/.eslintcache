[{"C:\\Users\\PC\\Desktop\\Slidecraft\\src\\index.js":"1","C:\\Users\\PC\\Desktop\\Slidecraft\\src\\App.js":"2","C:\\Users\\PC\\Desktop\\Slidecraft\\src\\components\\ChatInput.js":"3","C:\\Users\\PC\\Desktop\\Slidecraft\\src\\components\\ModelSelector.js":"4","C:\\Users\\PC\\Desktop\\Slidecraft\\src\\components\\ChatMessage.js":"5","C:\\Users\\PC\\Desktop\\Slidecraft\\src\\components\\AdminPanel.js":"6","C:\\Users\\PC\\Desktop\\Slidecraft\\src\\components\\Login.js":"7","C:\\Users\\PC\\Desktop\\Slidecraft\\src\\context\\AuthContext.js":"8","C:\\Users\\PC\\Desktop\\Slidecraft\\src\\components\\UserMenu.js":"9"},{"size":263,"mtime":1762403804106,"results":"10","hashOfConfig":"11"},{"size":9124,"mtime":1762454643731,"results":"12","hashOfConfig":"11"},{"size":2102,"mtime":1762403804101,"results":"13","hashOfConfig":"11"},{"size":650,"mtime":1762403804103,"results":"14","hashOfConfig":"11"},{"size":2135,"mtime":1762403804101,"results":"15","hashOfConfig":"11"},{"size":8570,"mtime":1762447429600,"results":"16","hashOfConfig":"11"},{"size":2238,"mtime":1762447356122,"results":"17","hashOfConfig":"11"},{"size":3586,"mtime":1762447327250,"results":"18","hashOfConfig":"11"},{"size":1771,"mtime":1762447395307,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"2psxs5",{"filePath":"23","messages":"24","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"25"},{"filePath":"26","messages":"27","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"28","messages":"29","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"30","messages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"32","messages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34"},{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39"},{"filePath":"40","messages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\PC\\Desktop\\Slidecraft\\src\\index.js",[],["42","43"],"C:\\Users\\PC\\Desktop\\Slidecraft\\src\\App.js",["44"],"import React, { useState, useRef, useEffect } from 'react';\r\nimport { AuthProvider, useAuth } from './context/AuthContext';\r\nimport Login from './components/Login';\r\nimport UserMenu from './components/UserMenu';\r\nimport AdminPanel from './components/AdminPanel';\r\nimport ChatMessage from './components/ChatMessage';\r\nimport ChatInput from './components/ChatInput';\r\nimport ModelSelector from './components/ModelSelector';\r\nimport './App.css';\r\n\r\n// Main App Component with Authentication\r\nfunction MainApp() {\r\n  const { isAuthenticated, loading, getAuthHeaders } = useAuth();\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n  const [chats, setChats] = useState([]); // [{id, title, messages: []}]\r\n  const [currentChatId, setCurrentChatId] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [selectedModel, setSelectedModel] = useState('llama3.1:latest');\r\n  const [availableModels, setAvailableModels] = useState([]);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  const currentChat = chats.find(c => c.id === currentChatId);\r\n\r\n  // --- Scroll autom√°tico ---\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n  useEffect(scrollToBottom, [currentChat?.messages]);\r\n\r\n  // --- Cargar modelos disponibles ---\r\n  useEffect(() => { fetchAvailableModels(); }, []);\r\n\r\n  const fetchAvailableModels = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:11434/api/tags');\r\n      const data = await response.json();\r\n      if (data.models && data.models.length > 0) {\r\n        setAvailableModels(data.models.map(model => model.name));\r\n      } else {\r\n        setAvailableModels(['llama3.1:latest']);\r\n      }\r\n    } catch {\r\n      setAvailableModels(['llama3.1:latest']);\r\n    }\r\n  };\r\n\r\n  // --- Cargar historial del usuario desde MongoDB ---\r\n  useEffect(() => {\r\n    async function loadUserHistory() {\r\n      try {\r\n        const res = await fetch(\"http://localhost:4000/history\", {\r\n          headers: getAuthHeaders()\r\n        });\r\n        const data = await res.json();\r\n\r\n        if (data.conversions && data.conversions.length > 0) {\r\n          const formattedChats = data.conversions.map((c, index) => ({\r\n            id: c._id,\r\n            title: `Presentation ${data.conversions.length - index}`,\r\n            messages: [\r\n              { role: 'system', content: `Created: ${new Date(c.timestamp).toLocaleString()}`, timestamp: new Date(c.timestamp) },\r\n              { role: 'assistant', content: `Slide Count: ${c.metadata?.slideCount || 'N/A'}\\nCharacters: ${c.metadata?.characterCount || 'N/A'}`, timestamp: new Date(c.timestamp) }\r\n            ]\r\n          }));\r\n\r\n          setChats(formattedChats);\r\n          if (formattedChats.length > 0) {\r\n            setCurrentChatId(formattedChats[0].id);\r\n          }\r\n          console.log(\"‚úÖ Loaded user history from MongoDB\");\r\n          return;\r\n        }\r\n      } catch (err) {\r\n        console.warn(\"‚ö†Ô∏è Failed to load history:\", err);\r\n      }\r\n\r\n      // Si falla o est√° vac√≠o, cargar localStorage o crear uno nuevo\r\n      const saved = localStorage.getItem(\"ollama_chats\");\r\n      if (saved) {\r\n        const parsed = JSON.parse(saved);\r\n        setChats(parsed);\r\n        if (parsed.length > 0) setCurrentChatId(parsed[0].id);\r\n      } else {\r\n        createNewChat();\r\n      }\r\n    }\r\n\r\n    if (isAuthenticated) {\r\n      loadUserHistory();\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  // --- Guardar chats en localStorage tambi√©n ---\r\n  useEffect(() => {\r\n    localStorage.setItem(\"ollama_chats\", JSON.stringify(chats));\r\n  }, [chats]);\r\n\r\n  // --- Crear nuevo chat ---\r\n  const createNewChat = () => {\r\n    const newChat = {\r\n      id: Date.now(),\r\n      title: `Chat ${chats.length + 1}`,\r\n      messages: []\r\n    };\r\n    setChats(prev => [newChat, ...prev]);\r\n    setCurrentChatId(newChat.id);\r\n  };\r\n\r\n  // --- Enviar mensaje ---\r\n  const sendMessage = async (message) => {\r\n    if (!message.trim() || !currentChat) return;\r\n\r\n    const userMessage = { role: 'user', content: message, timestamp: new Date() };\r\n    const updatedChat = {\r\n      ...currentChat,\r\n      messages: [...currentChat.messages, userMessage]\r\n    };\r\n\r\n    setChats(prev =>\r\n      prev.map(c => c.id === currentChat.id ? updatedChat : c)\r\n    );\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:11434/api/chat', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          model: selectedModel,\r\n          messages: [\r\n            {\r\n              role: \"system\",\r\n              content: `You are an AI that generates professional presentations using Markdown.\r\nEach slide starts with \"##\", use \"-\" for bullet points.\r\nOutput Markdown only.`\r\n            },\r\n            ...updatedChat.messages\r\n          ],\r\n          stream: false\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n      const markdownResponse = data.message?.content || data.response || \"(No response)\";\r\n\r\n      const assistantMessage = {\r\n        role: 'assistant',\r\n        content: markdownResponse,\r\n        timestamp: new Date()\r\n      };\r\n\r\n      const chatWithResponse = {\r\n        ...updatedChat,\r\n        messages: [...updatedChat.messages, assistantMessage]\r\n      };\r\n      setChats(prev =>\r\n        prev.map(c => c.id === currentChat.id ? chatWithResponse : c)\r\n      );\r\n\r\n      // --- Enviar Markdown al backend Pandoc ---\r\n      const convertResponse = await fetch('http://localhost:4000/convert', {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify({ markdown: markdownResponse })\r\n      });\r\n\r\n      if (convertResponse.ok) {\r\n        const blob = await convertResponse.blob();\r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = `presentation_${Date.now()}.pptx`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        a.remove();\r\n        window.URL.revokeObjectURL(url);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(\"‚ùå Error:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Limpiar chat actual ---\r\n  const clearChat = () => {\r\n    if (!currentChat) return;\r\n    const cleared = { ...currentChat, messages: [] };\r\n    setChats(prev => prev.map(c => c.id === currentChat.id ? cleared : c));\r\n  };\r\n\r\n  // Show loading spinner while checking authentication\r\n  if (loading) {\r\n    return (\r\n      <div className=\"auth-loading\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>Loading...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show login if not authenticated\r\n  if (!isAuthenticated) {\r\n    return <Login />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <div className=\"sidebar\">\r\n        <button onClick={createNewChat} className=\"new-chat\">Ôºã New Chat</button>\r\n        {chats.map(chat => (\r\n          <div\r\n            key={chat.id}\r\n            className={`chat-item ${chat.id === currentChatId ? \"active\" : \"\"}`}\r\n            onClick={() => setCurrentChatId(chat.id)}\r\n          >\r\n            {chat.title}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"chat-main\">\r\n        <div className=\"app-header\">\r\n          <div className=\"header-content\">\r\n            <h1>{currentChat?.title || \"Slidecraft\"}</h1>\r\n            <div className=\"header-controls\">\r\n              <ModelSelector\r\n                models={availableModels}\r\n                selectedModel={selectedModel}\r\n                onModelChange={setSelectedModel}\r\n              />\r\n              <button onClick={clearChat} className=\"clear-button\">\r\n                Clear Chat\r\n              </button>\r\n              <UserMenu onOpenAdmin={() => setShowAdminPanel(true)} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"chat-container\">\r\n          <div className=\"messages-container\">\r\n            {(!currentChat || currentChat.messages.length === 0) && (\r\n              <div className=\"welcome-message\">\r\n                <h2>Welcome to Ollama Chat</h2>\r\n                <p>Start a conversation with your AI assistant</p>\r\n              </div>\r\n            )}\r\n            {currentChat?.messages.map((msg, i) => (\r\n              <ChatMessage key={i} message={msg} />\r\n            ))}\r\n            {isLoading && (\r\n              <ChatMessage message={{\r\n                role: 'assistant',\r\n                content: 'Thinking...',\r\n                timestamp: new Date(),\r\n                isLoading: true\r\n              }} />\r\n            )}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n\r\n          <ChatInput onSendMessage={sendMessage} disabled={isLoading} />\r\n        </div>\r\n      </div>\r\n\r\n      {showAdminPanel && (\r\n        <AdminPanel onClose={() => setShowAdminPanel(false)} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// App wrapper with AuthProvider\r\nfunction App() {\r\n  return (\r\n    <AuthProvider>\r\n      <MainApp />\r\n    </AuthProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","C:\\Users\\PC\\Desktop\\Slidecraft\\src\\components\\ChatInput.js",[],"C:\\Users\\PC\\Desktop\\Slidecraft\\src\\components\\ModelSelector.js",[],"C:\\Users\\PC\\Desktop\\Slidecraft\\src\\components\\ChatMessage.js",[],"C:\\Users\\PC\\Desktop\\Slidecraft\\src\\components\\AdminPanel.js",["45","46","47"],"import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport './AdminPanel.css';\r\n\r\nconst AdminPanel = ({ onClose }) => {\r\n  const { getAuthHeaders } = useAuth();\r\n  const [users, setUsers] = useState([]);\r\n  const [stats, setStats] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [showCreateForm, setShowCreateForm] = useState(false);\r\n  const [editingUser, setEditingUser] = useState(null);\r\n\r\n  // Form state\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    password: '',\r\n    role: 'employee'\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n    fetchStats();\r\n  }, []);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:4000/api/admin/users', {\r\n        headers: getAuthHeaders()\r\n      });\r\n\r\n      if (!response.ok) throw new Error('Failed to fetch users');\r\n\r\n      const data = await response.json();\r\n      setUsers(data.users);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:4000/api/admin/stats', {\r\n        headers: getAuthHeaders()\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setStats(data.stats);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to fetch stats:', err);\r\n    }\r\n  };\r\n\r\n  const handleCreateUser = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:4000/api/admin/users', {\r\n        method: 'POST',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify(formData)\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to create user');\r\n      }\r\n\r\n      // Reset form and refresh users\r\n      setFormData({ username: '', password: '', role: 'employee' });\r\n      setShowCreateForm(false);\r\n      fetchUsers();\r\n      fetchStats();\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  const handleDeleteUser = async (userId) => {\r\n    if (!window.confirm('Are you sure you want to delete this user? All their presentations will be deleted.')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`http://localhost:4000/api/admin/users/${userId}`, {\r\n        method: 'DELETE',\r\n        headers: getAuthHeaders()\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        throw new Error(data.error || 'Failed to delete user');\r\n      }\r\n\r\n      fetchUsers();\r\n      fetchStats();\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  const handleChangePassword = async (userId) => {\r\n    const newPassword = window.prompt('Enter new password (minimum 6 characters):');\r\n\r\n    if (!newPassword) return;\r\n\r\n    if (newPassword.length < 6) {\r\n      setError('Password must be at least 6 characters');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`http://localhost:4000/api/auth/change-password/${userId}`, {\r\n        method: 'PUT',\r\n        headers: getAuthHeaders(),\r\n        body: JSON.stringify({ newPassword })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to change password');\r\n      }\r\n\r\n      alert('Password changed successfully');\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"admin-panel-overlay\">\r\n        <div className=\"admin-panel\">\r\n          <div className=\"admin-panel-loading\">Loading...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"admin-panel-overlay\" onClick={onClose}>\r\n      <div className=\"admin-panel\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"admin-panel-header\">\r\n          <h2>Admin Panel</h2>\r\n          <button className=\"close-button\" onClick={onClose}>√ó</button>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"error-banner\">\r\n            {error}\r\n            <button onClick={() => setError('')}>√ó</button>\r\n          </div>\r\n        )}\r\n\r\n        {stats && (\r\n          <div className=\"stats-grid\">\r\n            <div className=\"stat-card\">\r\n              <div className=\"stat-value\">{stats.totalUsers}</div>\r\n              <div className=\"stat-label\">Total Users</div>\r\n            </div>\r\n            <div className=\"stat-card\">\r\n              <div className=\"stat-value\">{stats.totalEmployees}</div>\r\n              <div className=\"stat-label\">Employees</div>\r\n            </div>\r\n            <div className=\"stat-card\">\r\n              <div className=\"stat-value\">{stats.totalAdmins}</div>\r\n              <div className=\"stat-label\">Admins</div>\r\n            </div>\r\n            <div className=\"stat-card\">\r\n              <div className=\"stat-value\">{stats.totalPresentations}</div>\r\n              <div className=\"stat-label\">Total Presentations</div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"admin-panel-actions\">\r\n          <button\r\n            className=\"create-user-button\"\r\n            onClick={() => setShowCreateForm(!showCreateForm)}\r\n          >\r\n            {showCreateForm ? 'Cancel' : '+ Create New User'}\r\n          </button>\r\n        </div>\r\n\r\n        {showCreateForm && (\r\n          <form className=\"create-user-form\" onSubmit={handleCreateUser}>\r\n            <h3>Create New User</h3>\r\n            <div className=\"form-row\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Username\"\r\n                value={formData.username}\r\n                onChange={(e) => setFormData({ ...formData, username: e.target.value })}\r\n                required\r\n              />\r\n              <input\r\n                type=\"password\"\r\n                placeholder=\"Password (min 6 characters)\"\r\n                value={formData.password}\r\n                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n                required\r\n              />\r\n              <select\r\n                value={formData.role}\r\n                onChange={(e) => setFormData({ ...formData, role: e.target.value })}\r\n              >\r\n                <option value=\"employee\">Employee</option>\r\n                <option value=\"admin\">Admin</option>\r\n              </select>\r\n              <button type=\"submit\">Create</button>\r\n            </div>\r\n          </form>\r\n        )}\r\n\r\n        <div className=\"users-table-container\">\r\n          <table className=\"users-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Username</th>\r\n                <th>Role</th>\r\n                <th>Presentations</th>\r\n                <th>Created</th>\r\n                <th>Last Login</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {users.map((user) => (\r\n                <tr key={user.id}>\r\n                  <td>{user.username}</td>\r\n                  <td>\r\n                    <span className={`role-badge ${user.role}`}>\r\n                      {user.role}\r\n                    </span>\r\n                  </td>\r\n                  <td>{user.presentationCount || 0}</td>\r\n                  <td>{new Date(user.createdAt).toLocaleDateString()}</td>\r\n                  <td>\r\n                    {user.lastLogin\r\n                      ? new Date(user.lastLogin).toLocaleDateString()\r\n                      : 'Never'}\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"action-buttons\">\r\n                      <button\r\n                        className=\"action-btn change-password\"\r\n                        onClick={() => handleChangePassword(user.id)}\r\n                        title=\"Change Password\"\r\n                      >\r\n                        üîë\r\n                      </button>\r\n                      <button\r\n                        className=\"action-btn delete\"\r\n                        onClick={() => handleDeleteUser(user.id)}\r\n                        title=\"Delete User\"\r\n                      >\r\n                        üóëÔ∏è\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n","C:\\Users\\PC\\Desktop\\Slidecraft\\src\\components\\Login.js",[],"C:\\Users\\PC\\Desktop\\Slidecraft\\src\\context\\AuthContext.js",["48"],"import React, { createContext, useState, useContext, useEffect } from 'react';\r\n\r\nconst AuthContext = createContext(null);\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [token, setToken] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Check if user is logged in on mount\r\n  useEffect(() => {\r\n    const storedToken = localStorage.getItem('token');\r\n    const storedUser = localStorage.getItem('user');\r\n\r\n    if (storedToken && storedUser) {\r\n      setToken(storedToken);\r\n      setUser(JSON.parse(storedUser));\r\n      // Verify token is still valid\r\n      verifyToken(storedToken);\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Verify token with backend\r\n  const verifyToken = async (tokenToVerify) => {\r\n    try {\r\n      const response = await fetch('http://localhost:4000/api/auth/me', {\r\n        headers: {\r\n          'Authorization': `Bearer ${tokenToVerify}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setUser(data.user);\r\n      } else {\r\n        // Token invalid, clear auth\r\n        logout();\r\n      }\r\n    } catch (err) {\r\n      console.error('Token verification error:', err);\r\n      logout();\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Login function\r\n  const login = async (username, password) => {\r\n    try {\r\n      setError(null);\r\n      const response = await fetch('http://localhost:4000/api/auth/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ username, password })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Login failed');\r\n      }\r\n\r\n      // Store token and user\r\n      localStorage.setItem('token', data.token);\r\n      localStorage.setItem('user', JSON.stringify(data.user));\r\n      setToken(data.token);\r\n      setUser(data.user);\r\n\r\n      return { success: true };\r\n    } catch (err) {\r\n      setError(err.message);\r\n      return { success: false, error: err.message };\r\n    }\r\n  };\r\n\r\n  // Logout function\r\n  const logout = async () => {\r\n    try {\r\n      if (token) {\r\n        await fetch('http://localhost:4000/api/auth/logout', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.error('Logout error:', err);\r\n    } finally {\r\n      // Clear local storage and state\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      setToken(null);\r\n      setUser(null);\r\n    }\r\n  };\r\n\r\n  // Get auth headers for API calls\r\n  const getAuthHeaders = () => {\r\n    if (!token) return {};\r\n    return {\r\n      'Authorization': `Bearer ${token}`,\r\n      'Content-Type': 'application/json'\r\n    };\r\n  };\r\n\r\n  // Check if user is admin\r\n  const isAdmin = () => {\r\n    return user && user.role === 'admin';\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    token,\r\n    loading,\r\n    error,\r\n    login,\r\n    logout,\r\n    getAuthHeaders,\r\n    isAdmin,\r\n    isAuthenticated: !!user\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContext;\r\n","C:\\Users\\PC\\Desktop\\Slidecraft\\src\\components\\UserMenu.js",[],{"ruleId":"49","replacedBy":"50"},{"ruleId":"51","replacedBy":"52"},{"ruleId":"53","severity":1,"message":"54","line":91,"column":6,"nodeType":"55","endLine":91,"endColumn":23,"suggestions":"56"},{"ruleId":"57","severity":1,"message":"58","line":12,"column":10,"nodeType":"59","messageId":"60","endLine":12,"endColumn":21},{"ruleId":"57","severity":1,"message":"61","line":12,"column":23,"nodeType":"59","messageId":"60","endLine":12,"endColumn":37},{"ruleId":"53","severity":1,"message":"62","line":24,"column":6,"nodeType":"55","endLine":24,"endColumn":8,"suggestions":"63"},{"ruleId":"53","severity":1,"message":"64","line":32,"column":6,"nodeType":"55","endLine":32,"endColumn":8,"suggestions":"65"},"no-native-reassign",["66"],"no-negated-in-lhs",["67"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'createNewChat' and 'getAuthHeaders'. Either include them or remove the dependency array.","ArrayExpression",["68"],"no-unused-vars","'editingUser' is assigned a value but never used.","Identifier","unusedVar","'setEditingUser' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'fetchStats' and 'fetchUsers'. Either include them or remove the dependency array.",["69"],"React Hook useEffect has a missing dependency: 'verifyToken'. Either include it or remove the dependency array.",["70"],"no-global-assign","no-unsafe-negation",{"desc":"71","fix":"72"},{"desc":"73","fix":"74"},{"desc":"75","fix":"76"},"Update the dependencies array to be: [createNewChat, getAuthHeaders, isAuthenticated]",{"range":"77","text":"78"},"Update the dependencies array to be: [fetchStats, fetchUsers]",{"range":"79","text":"80"},"Update the dependencies array to be: [verifyToken]",{"range":"81","text":"82"},[3450,3467],"[createNewChat, getAuthHeaders, isAuthenticated]",[713,715],"[fetchStats, fetchUsers]",[959,961],"[verifyToken]"]